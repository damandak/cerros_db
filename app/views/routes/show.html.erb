<% if notice then %>
  <div class="alert alert-primary" role="alert"><%= notice %></div>
<% end %>

<h2> <%= @route.name %>   </h2>
<h5> <%= @route.mountain.fullname %> </h5>
	<div class="btn-group" role="group" aria-label="Acciones">
		<%= link_to ['Editar', @route.name].join(" "), edit_route_path(@route, :mountain => @route.mountain), class: "btn btn-primary my-2"  %> 
		<%= link_to 'Volver a ' + @route.mountain.fullname , mountain_path(@route.mountain), class: "btn btn-secondary my-2"  %>
	</div>



<table class="table table-striped">
  	<tbody>
    	<tr>
    		<th>Cerro</th>
    		<th> <%= link_to @route.mountain.fullname , mountain_path(@route.mountain)%> </th>
    	</tr>
    	<tr>
    		<th>Ruta</th>
    		<td> <%= @route.name %> </th>
    	</tr>
 	</tbody>
</table>

<h3 class="mt-3"> Ascensos Destacados</h3>

<% if @route.ascents.count > 0 %>
	<table class="table table-sm table-striped">
	  	<thead>
	    	<tr>
	    		<th style="min-width: 120px">Fecha</th>
	    		<th>Ruta</th>
	    		<th>Descripci√≥n</th>
	      		<th>Ascensionistas</th>
	      		<th>Acciones</th>
	    	</tr>
	  	</thead>
	  	<tbody>
	    	<% @route.ascents.sort_by(&:fulldate).each do |ascent| %>
				<tr>
					<td> <%= ascent.fulldate %> </td>
					<td> <%= ascent.route.name %> </td>
					<td> <%= ascent.name %> </td>
					<td> 
						<% cont = 0  %>
						<% ascent.andinists.each do |andinist| %>
							<%= cont == 0 ? "" :', '%>
							<%= link_to andinist.fullname, andinist_path(andinist) %>
							<% cont += 1 %>
						<% end %>
					</td>
					<td>
						<%= link_to edit_ascent_path(ascent, :mountain => @route.mountain) do %>
							<i class="fa fa-edit"></i>
						<% end %>
					</td>
				</tr>
	    	<% end %>
	 	</tbody>
	</table>
<% else %>
	<p>Sin Ascensos Registrados</p>
<% end %>
<%= link_to 'Crear Ascenso Destacado', new_ascent_path(:mountain => @route.mountain), class: "btn btn-primary btn-sm my-2"  %>

<% if @route.mountain.routes.count > 1 then %>
	<h3> Otras rutas </h3>
	<table class="table table-striped">
	  	<tbody>
	    	<tr>
	    		<th>Ruta</th>
	    	</tr>
	    	<% @route.mountain.routes.each do |route| %>
	    		<% if route != @route then %>
			    	<tr>
			    		<td>
			    			<%= link_to route.name , route_path(route, :mountain => @route.mountain)%>
			    		</th>
			    	</tr>
			    <% end %>
		    <% end %>
	 	</tbody>
	</table>
<% end %>


<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCakFWS-TejUPvZ-OHO1rM4yehU4AWb5tQ&callback=initMap&libraries=&v=weekly" async="false"></script>